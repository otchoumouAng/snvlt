{% extends 'template_base.html.twig' %}

{% block Title %}
    SNVLT - Types de Documents
{% endblock %}

{% block menu %}
    {% include 'base/menu.html.twig' %}
{% endblock %}

{% block page_content %}
    <style>
        .type-document-row.selected {
            background-color: #e6f7ff !important;
        }
        .type-document-row.table-secondary {
            opacity: 0.7;
        }
        .type-document-row:hover {
            background-color: #f8f9fa !important;
        }
        .type-document-row.table-secondary.selected {
            background-color: #cce5ff !important;
            opacity: 1 !important;
        }
        
        /* Style pour les notifications */
        #notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            width: 350px;
        }
        
        .notification {
            background: white;
            border-radius: 5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            animation: slideIn 0.3s forwards;
            border-left: 4px solid;
        }
        
        .notification.success {
            border-left-color: #28a745;
        }
        
        .notification.error {
            border-left-color: #dc3545;
        }
        
        .notification.warning {
            border-left-color: #ffc107;
        }
        
        .notification.info {
            border-left-color: #17a2b8;
        }
        
        .notification .icon {
            font-size: 24px;
            margin-right: 15px;
        }
        
        .notification.success .icon {
            color: #28a745;
        }
        
        .notification.error .icon {
            color: #dc3545;
        }
        
        .notification.warning .icon {
            color: #ffc107;
        }
        
        .notification.info .icon {
            color: #17a2b8;
        }
        
        .notification .content {
            flex: 1;
        }
        
        .notification .close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #6c757d;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>

    <h2 class="text-dark font-weight-bold mb-2">
        <img src="{{ asset('assets/images/webapp/attribution.png') }}" alt="TypeDocument"> Types de Documents
    </h2>
    
    <div class="d-sm-flex justify-content-xl-between align-items-center mb-2">
        <div class="btn-group p-1 rounded-5" role="group">
            <button id="btnAddTypeDocument" class="btn btn-primary p-2 mt-2">
                <i class="mdi mdi-plus-circle me-2"></i>Ajouter
            </button>
            <button id="btnEditTypeDocument" disabled class="btn btn-secondary p-2 mt-2">
                <i class="mdi mdi-pencil me-2"></i>Modifier
            </button>
        </div>
    </div>

    <table class="table table-responsive-sm w-100 p-2 bg-white" id="typeDocumentsTable">
        <!-- Le contenu du tableau sera généré par DataTables -->
    </table>

    <!-- Modal pour le formulaire -->
    <div class="modal fade" id="typeDocumentModal" tabindex="-1" aria-labelledby="typeDocumentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="typeDocumentModalTitle">Gestion des types de documents</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="typeDocumentModalBody">
                    <!-- Le contenu du formulaire sera chargé ici -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Conteneur pour les notifications -->
    <div id="notification-container"></div>
    
    <!-- Templates préchargés pour les formulaires -->
    <script type="text/template" id="template-form-new">
        {{ preloaded_forms.new|raw }}
    </script>
    
    <script type="text/template" id="template-form-edit">
        {{ preloaded_forms.edit|raw }}
    </script>
    
    <script type="text/template" id="template-form-read">
        {{ preloaded_forms.read|raw }}
    </script>

    <script src="{{ asset('assets/webapp/assets/vendors/jquery/jquery.min.js') }}"></script>
    <script src="https://cdn.datatables.net/2.1.4/js/dataTables.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Chargement des scripts dans le bon ordre -->
    <script src="{{ asset('assets/js/typedocument/api-service.js') }}"></script>
    <script src="{{ asset('assets/js/typedocument/notification.js') }}"></script>
    <script src="{{ asset('assets/js/typedocument/typedocument.js') }}"></script>
{% endblock %}